<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<head>
    <title>我的第一个网站</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 50px;
            background-color: #f0f8ff;
        }
        h1 {
            color: #3366cc;
        }
        .image-container {
            margin: 30px auto;
            max-width: 80%;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        .caption {
            margin-top: 15px;
            font-style: italic;
            color: #666;
        }
    </style>
</head>
<body>
    <h1>Hello World！</h1>
    <p>这是我部署在云端的第一个网站！</p>
    
    <div class="video-container">
        <video controls>
            <source src="/123.mp4" type="video/mp4">
            您的浏览器不支持HTML5视频
        </video>
        <div class="caption">这视频太酷了！</div>
    </div>
    
    <p>太酷了！</p>
	
	<h2>用户注册</h2>
	<form id="registerForm">
		<input type="text" id="regUsername" placeholder="用户名" required>
		<input type="password" id="regPassword" placeholder="密码" required>
		<button type="submit">注册</button>
	</form>
	<p id="registerMessage"></p>
	
	<hr>
	
	<h2>用户登录</h2>
	<form id="loginForm">
		<input type="text" id="loginUsername" placeholder="用户名" required>
		<input type="password" id="loginPassword" placeholder="密码" required>
		<button type="submit">登录</button>
	</form>
	<p id="loginMessage"></p>
	
	<script>
		// 1. 处理注册表单提交
		document.getElementById('registerForm').addEventListener('submit', async function(event) {
			event.preventDefault(); // 阻止表单默认提交行为（页面刷新）
	
			const username = document.getElementById('regUsername').value;
			const password = document.getElementById('regPassword').value;
			const messageElement = document.getElementById('registerMessage');
	
			try {
				const response = await fetch('http://localhost:3000/api/register', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({ username, password }),
				});
	
				const result = await response.json();
				messageElement.textContent = result.message;
				messageElement.style.color = response.ok ? 'green' : 'red';
	
			} catch (error) {
				console.error('注册错误:', error);
				messageElement.textContent = '注册请求失败！';
				messageElement.style.color = 'red';
			}
		});
	
		// 2. 处理登录表单提交
		document.getElementById('loginForm').addEventListener('submit', async function(event) {
			event.preventDefault();
	
			const username = document.getElementById('loginUsername').value;
			const password = document.getElementById('loginPassword').value;
			const messageElement = document.getElementById('loginMessage');
	
			try {
				const response = await fetch('http://localhost:3000/api/login', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify({ username, password }),
				});
	
				const result = await response.json();
				messageElement.textContent = result.message;
				messageElement.style.color = response.ok ? 'green' : 'red';
	
				// 如果登录成功，可以将token保存起来（例如localStorage），用于后续需要认证的请求
				if (response.ok) {
					console.log('登录成功，Token:', result.token);
					localStorage.setItem('authToken', result.token);
					// 这里可以跳转到其他页面，或者更新UI显示已登录状态
				}
	
			} catch (error) {
				console.error('登录错误:', error);
				messageElement.textContent = '登录请求失败！';
				messageElement.style.color = 'red';
			}
		});
	</script>
</body>
</html>